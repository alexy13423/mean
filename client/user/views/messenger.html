  <div class="page-header">
    <h1>
      Messenger
    </h1>
  </div>

  <div class="row">

    <div class="col-sm-4">

    <!-- conversations search-->
    <!--       
      <form ng-submit="searchConversations()">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Search" ng-model="query"></input>
          <span class="input-group-btn">
            <button type="submit" class="btn btn-primary"><i class="fa fa-search"></i></button>
          </span>
        </div>
      </form> -->

      <!-- conversation init button -->
      <div>
        <button type="button" class="form-control btn btn-primary" ng-click="initConversation()"><i class="fa fa-comment-o"></i></button>
      </div>

    <!-- conversations list - convo in conversations -->
      <!-- conversation latest message -->
      <div ng-repeat="conversation in conversations" ng-click="focusConversation(conversation)" 
      style="border-bottom: 1px solid black; padding: 10px 0">
        {{!conversation._id? 'New Message' : ''}}
        <!-- sender.pic --> <!-- sender.f_name --> <!-- sender.l_name --> <!-- sender.body | limitTo -->
        <span ng-bind="otherPeople(conversation)"></span>
          <br/>{{conversation.latest.body | limitTo: 40 }}

        <span class="text-right" ng-show="!conversation._id" ng-click="cancelNewConversation()"><i class="fa fa-times"></i></span>
      </div>

    </div> <!-- /end left column -->


    <!-- right column -->
    <!-- mainConversation display -->
    <div class="col-sm-8">


      <!-- user in mainConversation.users -->
      <div class="col-sm-12" style="border: 1px solid black; padding: 10px" title="Recipients">
        <div ng-repeat="user in mainConversation.users">
          <span ng-hide="isSelf(user._id)">{{user.f_name}} {{user.l_name}}</span><!-- <span class="text-right">Online? {{user.status}}</span> -->
        </div>

        <button ng-hide="mainConversation._id" ng-click="addUserModal = !addUserModal"><i class="fa fa-plus"> </i></button>

        <conversation-add-users ng-show="mainConversation.new && addUserModal"></conversation-add-users>
      </div>


      <!-- message in conversation.messages -->
      <div class="col-sm-12" ng-repeat="message in mainConversation.messages" style="border-bottom: 1px solid lightgray; padding: 10px">
        <!-- message.body -->
        <div class="{{ isSelf(message.user) ? 'text-right' : ''}}">{{message.body}}</div>
        <!-- message.timesent or message.timeread -->
        <div ng-show="!isSelf(message.user)"><small>Sent: {{message.timesent | date: 'MMM dd hh:mm'}}<small></div>
        <div class="text-right" ng-show="isSelf(message.user) && message.timeread"><small>Read: {{message.timeread | date: 'MMM dd hh:mm'}}</small></div>
      </div> <!-- /end right column -->

      <!-- conversation.newmessage -->
        <!-- conversation.newmessage.body -->
        <!-- emoji picker -->
        <!-- send button-->

      <form name="messageForm" ng-submit="createMessage()" novalidate>
        <div class="input-group">
          <input type="text" class="form-control" placeholder="message" ng-model="newmessage.body">
          <!-- <span class="input-group-btn"> <button class="btn btn-primary">Emoji</button> </span> -->
          <span class="input-group-btn"> <button type="submit" class="btn btn-primary">Send</button> </span>
        </div>
      </form>

    </div> <!-- /end row -->
  </div> <!-- /end row -->

  <div ng-show="debug" class="row"><div class="col-sm-12"><pre>
    mainConversation {{mainConversation|json}}
   -------- 
    user {{user|json}}
   -------- 
    users {{users|json}}
   -------- 
    conversations {{conversations|json}}
  </pre></div></div>
